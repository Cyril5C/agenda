═══════════════════════════════════════════════════════════════════════════════
  📋 COMMANDES UTILES - APPLICATION PM
═══════════════════════════════════════════════════════════════════════════════


🚀 DÉVELOPPEMENT LOCAL
───────────────────────────────────────────────────────────────────────────────

  Démarrer le serveur de développement :
  ./start-dev.sh

  URLs disponibles :
  • http://localhost:8000/index.html      (Page principale)
  • http://localhost:8000/admin.html      (Administration)
  • http://localhost:8000/api.php         (API)

  Arrêter le serveur :
  Ctrl+C dans le terminal


⚙️  GESTION DES ENVIRONNEMENTS
───────────────────────────────────────────────────────────────────────────────

  Voir la configuration actuelle :
  ./switch-env.sh

  Passer en mode développement :
  ./switch-env.sh dev

  Passer en mode production :
  ./switch-env.sh prod


📤 DÉPLOIEMENT EN PRODUCTION
───────────────────────────────────────────────────────────────────────────────

  Tester le déploiement (simulation, aucun fichier envoyé) :
  ./deploy-test.sh

  Déployer réellement en production :
  ./deploy-prod.sh

  Commande manuelle (si nécessaire) :
  lftp -u "fredericbn","Kt8pv76TIU" ftp.cluster003.hosting.ovh.net << EOF
  set ssl:verify-certificate no
  lcd /Users/cyril.cincet/Nextcloud4/SitesWeb/pm
  cd pm
  mirror -R --exclude-glob-from=.lftpignore --verbose . .
  bye
  EOF


🔍 DIAGNOSTIC
───────────────────────────────────────────────────────────────────────────────

  Voir les logs :
  tail -f logs/app.log

  Voir les dernières 50 lignes :
  tail -50 logs/app.log

  Vider les logs :
  > logs/app.log

  Vérifier les processus PHP :
  ps aux | grep php

  Voir quel processus utilise le port 8000 :
  lsof -i :8000

  Arrêter le serveur sur le port 8000 :
  kill $(lsof -ti:8000)


📊 FICHIERS DE CONFIGURATION
───────────────────────────────────────────────────────────────────────────────

  Éditer la configuration locale (développement) :
  nano .env

  Voir la configuration :
  cat .env

  Voir les exclusions de déploiement :
  cat .lftpignore


🧪 TESTS
───────────────────────────────────────────────────────────────────────────────

  Tester l'API localement :
  curl http://localhost:8000/api.php

  Tester l'API en production :
  curl https://votredomaine.com/pm/api.php

  Vérifier que .env est protégé en production :
  curl https://votredomaine.com/pm/.env
  (doit retourner 403 Forbidden)

  Tester un upload d'image :
  curl -X POST -F "image=@chemin/vers/image.jpg" http://localhost:8000/upload.php


🔐 SÉCURITÉ
───────────────────────────────────────────────────────────────────────────────

  Vérifier les permissions sur le serveur :
  chmod 644 pm/*.php pm/*.html pm/*.json
  chmod 600 pm/.env
  chmod 755 pm/images pm/logs
  chmod 644 pm/.htaccess

  Créer le fichier .env en production (via SSH ou FTP) :
  cat > pm/.env << 'ENVEOF'
  APP_ENV=prod
  APP_DEBUG=false
  CORS_ORIGIN=https://votredomaine.com
  ENVEOF


📚 DOCUMENTATION
───────────────────────────────────────────────────────────────────────────────

  Lire le guide complet de déploiement :
  cat DEPLOY.md

  Lire le guide de démarrage rapide :
  cat QUICK_START.md

  Lire la documentation complète :
  cat README.md

  Voir le résumé du déploiement :
  cat DEPLOIEMENT_RESUME.txt

  Voir la liste des fichiers envoyés en prod :
  cat FILES_SENT_TO_PROD.txt


🗂️  GESTION DES DONNÉES
───────────────────────────────────────────────────────────────────────────────

  Voir les événements :
  cat evenements.json | jq .

  Sauvegarder les événements :
  cp evenements.json evenements.backup.json

  Restaurer les événements :
  cp evenements.backup.json evenements.json

  Voir les images uploadées :
  ls -lh images/


🔄 GIT (si vous utilisez Git)
───────────────────────────────────────────────────────────────────────────────

  Initialiser le dépôt :
  git init

  Ajouter tous les fichiers (le .gitignore exclut les fichiers sensibles) :
  git add .

  Créer un commit :
  git commit -m "Configuration des environnements"

  ⚠️  Le .gitignore protège automatiquement :
  • .env (ne sera JAMAIS commité)
  • logs/ (ne sera JAMAIS commité)
  • .DS_Store (ne sera JAMAIS commité)


═══════════════════════════════════════════════════════════════════════════════
  💡 RAPPELS IMPORTANTS
═══════════════════════════════════════════════════════════════════════════════

  ⚠️  NE JAMAIS envoyer .env en production !
     Créez un .env spécifique sur le serveur

  ⚠️  Toujours tester avec ./deploy-test.sh avant ./deploy-prod.sh

  ⚠️  En production : APP_DEBUG=false pour la sécurité

  ✅  Le fichier .htaccess protège automatiquement les fichiers sensibles

  ✅  Les logs sont automatiques dans logs/app.log

═══════════════════════════════════════════════════════════════════════════════
